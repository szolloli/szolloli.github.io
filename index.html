<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
            body
            {
                background-color: #f2f2f2; display: flex; align-items: center; flex-direction: column; margin: 0;
            }

        </style>
</head>

<body>
    <div  style="width: 390px" id="rapyd-checkout"></div>

    <!-- code to display the iframe -->
    <script src="https://checkouttoolkit.rapyd.net"></script>
    <script>
        window.onload = function () { 
            let checkout = new RapydCheckoutToolkit({
                pay_button_text: "Top up",
                pay_button_color: "#004EA8",
                id:  window.location.search.substring(1), // your checkout page id goes here
                close_on_complete: true,
            });
            checkout.displayCheckout();
        }
        window.addEventListener('onCheckoutPaymentSuccess', function (event) {
		console.log('success');
		console.log(event.detail.status);
		console.log(event.detail);
            if (event.detail.status === 'CLO') {
// 		    window.alert('closed');
		    
		var a = document.createElement('a');
		a.href = `exp://127.0.0.1:19000/--/?redirect=0}`;
		          var linkText = document.createTextNode("finish");
      a.appendChild(linkText);
		document.body.appendChild(a);
		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=0`);
// 		    window.location.replace(`symplifi://--/?redirect=0`);
            }
            if (event.detail.status === 'ACT') {
		var a = document.createElement('a');
		a.href = `exp://127.0.0.1:19000/--/?redirect=1&url=${event.detail.redirect_url}`;
      var linkText = document.createTextNode("redirect");
      a.appendChild(linkText);
		document.body.appendChild(a);
// 		    window.alert('active');
		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=1&url=${event.detail.redirect_url}`);
// 		window.location.replace(`symplifi://--/?redirect=1&url=${event.detail.redirect_url}`);
            }
        });
        window.addEventListener('onCheckoutFailure', function (event) {	
	    console.log('checkout fail');
            console.log(event.detail.error);
        });
        window.addEventListener('onCheckoutPaymentFailure', (event)=> {
	    console.log('payment fail');
            console.log(event.detail.error);
        })
    </script>
</body>
</html>
