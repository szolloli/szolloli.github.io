<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
            body
            {
                background-color: #f2f2f2; display: flex; align-items: center; flex-direction: column; margin: 0;
            }
	    a {
        	font-size:16px;
	        line-height:16px;
        	padding:10px 30px;
	        background-color:#2569bb;
        	color:#ffffff;
        	text-decoration:none;
        	border-radius:7px;
        	font-weight:normal;
        	font-family:Arial;
        	position: absolute;
        	top: 50%;
      	    }
        </style>
</head>

<body>
    <div  style="width: 390px" id="rapyd-checkout"></div>

    <!-- code to display the iframe -->
    <script src="https://checkouttoolkit.rapyd.net"></script>
    <script>
        window.onload = function () { 
            let checkout = new RapydCheckoutToolkit({
                pay_button_text: "Top up",
                pay_button_color: "#004EA8",
                id:  window.location.search.substring(1), // your checkout page id goes here
                close_on_complete: true,
            });
            checkout.displayCheckout();
        }
        window.addEventListener('onCheckoutPaymentSuccess', function (event) {
		console.log('success');
		console.log(event.detail.status);
		console.log(event.detail);
            if (event.detail.status === 'CLO') {
		    
// 		    alert('clo');
		var a = document.createElement('a');
		a.href = `symplifi://--/?redirect=0`;
		    a.id='href';
		          var linkText = document.createTextNode("Continue");
      a.appendChild(linkText);
		document.getElementById('rapyd-checkout').replaceWith(a);
		    
// 		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=0`);
// 		window.location.replace(`symplifi://--/?redirect=0`);
		    
// 		setTimeout(() => {
// 		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=0`);
// 		alert('clo');	
// 			document.getElementById('href').click();
			
// 			document.getElementById('href').click();
// 		window.location.assign(`symplifi://--/?redirect=0`);
			
// 		window.location.redirect(`https://shmu.sk`);
// 		},1000);
            }
            if (event.detail.status === 'ACT') {
// 		    alert('act');
		var a = document.createElement('a');
		    a.id='href';
		a.href = `symplifi://--/?redirect=1&url=${event.detail.redirect_url}`;
      var linkText = document.createTextNode("Continue");
      a.appendChild(linkText);
		document.getElementById('rapyd-checkout').replaceWith(a);
// 		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=1&url=${event.detail.redirect_url}`);
		    
// 		window.location.replace(`symplifi://--/?redirect=1&url=${event.detail.redirect_url}`);
		    
// 		setTimeout(() => {
// 		window.location.replace(`exp://127.0.0.1:19000/--/?redirect=1&url=${event.detail.redirect_url}`);
// 		document.getElementById('href').click();
// 			document.getElementById('href').click();
// 		window.location.assign(`symplifi://--/?redirect=1&url=${event.detail.redirect_url}`);
			
// 		window.location.redirect(`https://shmu.sk`);
// 		},1000);
            }
        });
        window.addEventListener('onCheckoutFailure', function (event) {	
	    console.log('checkout fail');
            console.log(event.detail.error);
        });
        window.addEventListener('onCheckoutPaymentFailure', (event)=> {
	    console.log('payment fail');
            console.log(event.detail.error);
        })
    </script>
</body>
</html>
